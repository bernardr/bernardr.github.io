<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Scraping and Creating RSS Feeds From Craigslist Data - A New Method</title><link href="https://fonts.googleapis.com/css?family=Lato:900|Work+Sans" rel="stylesheet"><link rel="stylesheet" href="/blog/css/main.css"><title>Scraping and Creating RSS Feeds From Craigslist Data - A New Method</title><meta property="og:title" content="Scraping and Creating RSS Feeds From Craigslist Data" /><meta name="description" content="The Problem and it’s Obvious Solution" /><meta property="og:description" content="The Problem and it’s Obvious Solution" /><link rel="canonical" href="http://localhost:4000/blog/web-scraping/ruby/nokogiri/2014/06/10/web-scraping.html" /><meta property="og:url" content="http://localhost:4000/blog/web-scraping/ruby/nokogiri/2014/06/10/web-scraping.html" /><meta property="og:site_name" content="A New Method" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2014-06-09T17:23:41-07:00" /><script type="application/ld+json"> {"@context": "http://schema.org", "@type": "BlogPosting", "headline": "Scraping and Creating RSS Feeds From Craigslist Data", "datePublished": "2014-06-09T17:23:41-07:00", "description": "The Problem and it’s Obvious Solution", "url": "http://localhost:4000/blog/web-scraping/ruby/nokogiri/2014/06/10/web-scraping.html"}</script></head><body style="background-color: rgb(255, 255, 255)"><script src="/blog/js/theme.min.js"></script><header> <a href="/blog/"><div class="home"></div></a></header><h1 class="post-headline">Scraping and Creating RSS Feeds From Craigslist Data</h1><div class="meta"><span>June 10, 2014</span></div><h2 id="the-problem-and-its-obvious-solution">The Problem and it’s Obvious Solution</h2><p>It’s been said, that when all you have is a hammer everything looks like a nail. Lately, I’ve been wielding a hammer called “web scraping”, and everywhere I look I see nails in need of hammering.</p><p>With that said, I’ve been doing some work with the great Ruby Gem <a href="nokogiri.org">Nokogiri</a> lately and decided to put it to some use, by using it on Craigslist.</p><p>In the past, I’ve found work in the Craigslist Computer Gigs [<code class="highlighter-rouge">/cpg/</code>] section in various cities. But I’d been irritated by having to open tabs for each new city, and it’s /cpg/ listing.</p><p>The solution isn’t graceful, but is obvious: RSS.</p><p>##RSS’ Recent History</p><p><a href="http://en.wikipedia.org/wiki/RSS">RSS</a> isn’t discussed much anymore since Google shuttered it’s <a href="http://en.wikipedia.org/wiki/Google_Reader">Reader</a> service a few months ago. I recall their reasoning being along the lines of, “RSS isn’t really used much anymore …”. The nerds were upset. I was one of them.</p><p>Shortly after that, Twitter stopped supporting RSS feeds as well, and RSS entered it’s current phase: that orange icon on many a site, but not fully utilized by visitors more comfortable with Google+ and Facebook “Like” buttons.</p><p>To me, the sight of it has the air of an older web. One dedicated to open formats, and open data. Which is probably why Craigslist still supports it.</p><h2 id="craigslist">Craigslist</h2><p>Craigslist.org features an RSS feed for nearly every page of it’s classified ads. From personals, event listings, and the especially the category we’re intereted in: job postings.</p><h3 id="getting-the-data">Getting the Data</h3><p>The main page of <a href="Craigslist.org">Craigslist.org</a> (CL) lists over 400 different sites, which provide the base URL for each city’s particular CL. You <em>could</em> take a few hours out of your day and copy-paste all of those URL’s into a text document <strong>or</strong> you could fire up an IRB session and tinker with Nokogiri for a few minutes.</p><p>I know what choice I made.</p><p>To make this process that much easier,I’ve put all the URL’s in a <code class="highlighter-rouge">.csv</code> for you, which you can <a href="https://dl.dropboxusercontent.com/u/493451/craigslist-scrape/craigslist-sites.csv">download here</a> [dropbox link].</p><p>###Tweaking the URL’s</p><p>Here’s a quick peek of the list of URL’s:</p><table> <thead> <tr> <th>URL’s</th> </tr> </thead> <tbody> <tr><td>http//auburn.craigslist.org</td></tr> <tr><td>http//bham.craigslist.org</td></tr> <tr><td>http//dothan.craigslist.org</td></tr> <tr><td>http//shoals.craigslist.org</td></tr> <tr><td>http//gadsden.craigslist.org</td></tr> </tbody> </table><p>The url paths are the same for all of the craiglist clasified pages. Simply adding <code class="highlighter-rouge">/cpg/</code> to the end of any domain will get us the page we need. You can, obviously, add any sub-page — and search parameter — but for for my purposes all I needed was the <code class="highlighter-rouge">/cpg</code> added to the 400+ URLs.</p><p>This is where <a href="http://www.sublimetext.com/2">SublimeText 2’s</a> multiple cursor feature eats the lunch of all text editors on the block. If you’re not hip to it, <strong><a href="https://www.youtube.com/watch?v=WXuBgSpLpK4">watch this video now</a></strong> and forever change the way you see a text editor.</p><p>Now, we have a text document with the URL’s appended with exactly what we need. Something like this:</p><table> <thead> <tr> <th>Updated URL’s</th> </tr> </thead> <tbody> <tr><td>http//auburn.craigslist.org/cpg/index.rss</td></tr> <tr><td>http//bham.craigslist.org/cpg/index.rss</td></tr> <tr><td>http//dothan.craigslist.org/cpg/index.rss</td></tr> <tr><td>http//shoals.craigslist.org/cpg/index.rss</td></tr> <tr><td>http//gadsden.craigslist.org/cpg/index.rss</td></tr> </tbody> </table><p>##Creating an RSS Feed of all the sites</p><p>Creating an RSS feed will be the easiest part. There are lots of services online that will do the conversion of a text or .csv of urls into an OPML file.</p><p>I used <a href="http://reader.feedshow.com/goodies/opml/OPMLBuilder-create-opml-from-rss-list.php">Feedshow</a>, having used them in the past, but googling around can probably yield something comparable or out right better.</p><p>After importing my data, and exporting out an OPML file I was then able to take my 500+ RSS feeds on to the RSS reader of my choice.</p><p>I first tried <a href="http://feedly.com/">Feedly</a>, but discovered they’d had <a href="http://blog.feedly.com/2014/01/29/update-regarding-the-craigslist-feeds/">issues updating their Craigslist feeds in the past</a>. To Feedly’s credit, they worked hard and did a great job of <a href="http://blog.feedly.com/2014/03/14/fix-it-march-5-craigslist-pipe-repaired/">fixing the issue</a>, but I still decided to seek other options.</p><p>Right now, I’m switching back and forth between <a href="http://www.vienna-rss.org/">Vienna</a> and <a href="http://www.rssowl.org/">RSS Owl</a>. I’m a long-time <a href="http://netnewswireapp.com/">NetNewsWire</a> user, but decided that importing a file of 400+ feeds into a libary of over 600 might not be the best idea.</p><h2 id="a-few-notes">A Few Notes</h2><p>I’ve been using this little system for a few days now, and I’m finding it works for me. I’m able to view and respond to ads at a rate, I’m pleased with.</p><p>Also, I’m not certain, but I feel that Craigslist might be delaying RSS feeds in order to drive traffic to the site … but that might just be silly thinking.</p><p>The system could use a little tweaking. For example, I’m considering creating specialized search URL’s to increase the signal to noise ratio inherent in Craigslist ads.</p><p>I’m sure there are any number of refinements I’ll make, but as of now: I’m pleased.</p><footer><div class="links"> <a href="/blog/about/">About</a> <a href="/blog/contact/">Contact</a> <a href="/blog/hacks/">hacks</a></div><div class="theme" onclick="theme()" style=" background-image: url(/blog/images/theme.svg)"></div></footer><script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', '', 'auto'); ga('send', 'pageview');</script></body></html>
